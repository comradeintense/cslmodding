---
import MainLayout from '../../layouts/MainLayout.astro';
import Link from '../../components/Link.astro';
import TableOfContents from '../../components/TableOfContents.astro';
---

<MainLayout>
	<TableOfContents />
	<section class="py-12 sm:ml-64 xl:mr-64 text-lg text-hit-gray-500">
		<h1 id="overview" class="border-b-4 border-hit-gray-600 pb-8 text-4xl font-bold text-hit-gray-400">Ploppable Asphalt+</h1>
		<div class="content">
			<h2 class="border-b-2 border-hit-gray-600 mt-24 pb-8 text-4xl font-medium text-hit-gray-400" id="about">About</h2>
			<div class="flex flex-col lg:flex-row gap-6 mt-4">
				<div class="lg:w-2/3">
					<p>
						<Link
							classes=""
							href="https://steamcommunity.com/sharedfiles/filedetails/?id=881291183&searchtext=ploppable+asphalt"
							text="The Ploppable Asphalt + (PA+) mod"
							theme="externallink"
						/> can be used to create props which use network shaders to display map theme textures such as asphalt, pavement, grass, gravel, cliff. You can also
						use diffuse, alpha, normal, specular maps depending on which exact shader you use. The props are also decal compatible.
					</p><p class="mt-4">This article assumes you are familiar with regular prop asset creation.</p>
				</div><div class="lg:w-1/3">
					<a href="https://i.imgur.com/XleNsu3.jpg" target="null"><img src="https://i.imgur.com/XleNsu3.jpg" /></a><p class="explanation">
						The official PA+ prop packs.
					</p>
				</div>
			</div>
			<h2 class="border-b-2 border-hit-gray-600 mt-24 pb-8 text-4xl font-medium text-hit-gray-400" id="script">Script</h2>
			<p class="mt-4">
				To convert a prop for use with PA+ mod, you need to run <Link
					classes=""
					href="https://gist.github.com/ronyx69/2f4b08a45f3a14c585597c848a594150"
					text="one of these scripts"
					theme="externallink"
				/> using the <Link classes="" href="https://steamcommunity.com/sharedfiles/filedetails/?id=450877484" text="ModTools" theme="externallink" /> console <span
					class="key">F7</span
				>.
			</p>
			<p class="mt-4">There are 3 different network shaders to choose from. In the official packs for PA+ they are used like this:</p>
			<ul class="mt-4 list-disc list-inside">
				<li class="mt-4">RoadBridge for asphalt and pavement<br /></li>
				<li class="mt-4">Road for grass and cliff<br /></li>
				<li class="mt-4">TrainBridge for gravel</li>
			</ul>
			<div class="flex gap-2 mt-6 items-start justify-start">
				<svg
					class="w-8 h-8 text-hoverlink flex-shrink-0"
					fill="none"
					stroke="currentColor"
					stroke-width="1.5"
					viewBox="0 0 24 24"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" stroke-linecap="round" stroke-linejoin="round"></path>
				</svg>
				<p class="italic">
					<em>
						The prop will not appear correctly inside the asset editor, as the PA+ mod hasn't processed it, that only happens when you load the game normally.
					</em>
				</p>
			</div>
			<h2 class="border-b-2 border-hit-gray-600 mt-24 pb-8 text-4xl font-medium text-hit-gray-400" id="mesh">Mesh</h2>
			<p class="mt-4">
				It's highly recommended to use only completely flat meshes, as the normals will not appear correctly when the prop is rotated - the lighting will
				"follow" the rotation.
			</p>
			<p class="mt-4">
				There are size limitations depending on the shader, for example - the regular road shader doesn't appear correctly for a 32x32 meter prop.
			</p>
			<p class="mt-4">
				To avoid Z-fighting for props placed on the ground, the mesh should be slightly raised, the official packs for PA+ are 2 cm above ground for main meshes
				and 5 cm above ground for LOD meshes.
			</p>
			<h2 class="border-b-2 border-hit-gray-600 mt-24 pb-8 text-4xl font-medium text-hit-gray-400" id="textures">Textures</h2>
			<div class="flex flex-col lg:flex-row gap-6 mt-4">
				<div class="lg:w-2/3">
					<p>The textures you need to import are similar to regular props, but the PA+ mod will convert the textures for use on network shaders.</p>
				</div><div class="lg:w-1/3">
					<a href="https://i.imgur.com/eb0CoMl.jpg" target="null"><img src="https://i.imgur.com/eb0CoMl.jpg" /></a><p class="explanation">
						Comparison between RoadBridge (left), TrainBridge (middle), Road (right) shaders. Imported textures are shown at the bottom.
					</p>
				</div>
			</div>
			<h3 class="mt-16 text-2xl text-hit-gray-400 font-semibold border-b border-hit-gray-500 pb-4" id="diffuse-d">Diffuse</h3>
			<p class="mt-4">Just like any diffuse texture</p>
			<h3 class="mt-16 text-2xl text-hit-gray-400 font-semibold border-b border-hit-gray-500 pb-4" id="alpha-a">Alpha</h3>
			<p class="mt-4">Works like a regular alpha map for RoadBridge and TrainBridge but displays grass when black on the Road shader.</p>
			<h3 class="mt-16 text-2xl text-hit-gray-400 font-semibold border-b border-hit-gray-500 pb-4" id="color-c">Color</h3>
			<p class="mt-4">White will display pavement for RoadBridge, gravel for TrainBridge, cliff for Road.</p>
			<h3 class="mt-16 text-2xl text-hit-gray-400 font-semibold border-b border-hit-gray-500 pb-4" id="illumination-i">Illumination</h3>
			<p class="mt-4">White displays asphalt on all 3 shaders.</p>
			<h3 class="mt-16 text-2xl text-hit-gray-400 font-semibold border-b border-hit-gray-500 pb-4" id="normal-n">Normal</h3>
			<p class="mt-4">Works just like any normal map for RoadBridge and TrainBridge, but doesn't work at all for Road.</p>
			<h3 class="mt-16 text-2xl text-hit-gray-400 font-semibold border-b border-hit-gray-500 pb-4" id="specular-s">Specular</h3>
			<p class="mt-4">Works just like any specular map.</p>
		</div>
	</section>
</MainLayout>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const tocElement = document.querySelector('.table-of-contents ul');
		if (!tocElement) return;

		document.querySelectorAll('h2, h3').forEach((heading) => {
			const id = heading.id;
			const title = heading.textContent;
			const isH2 = heading.tagName === 'H2';

			const listItem = document.createElement('li');
			listItem.className = isH2 ? '' : 'mt-1'; // Add Tailwind classes here

			const link = document.createElement('a');
			link.href = `#${id}`;
			link.textContent = title;
			link.className = isH2
				? 'text-hit-gray-200 text-lg inline-flex rounded-md hover:text-hoverlink mt-6'
				: 'text-hit-gray-400 text-[1rem] leading-[1.25rem] inline-flex ps-2 rounded-md hover:text-hoverlink'; // Add Tailwind classes here

			listItem.appendChild(link);
			tocElement.appendChild(listItem);
		});
	});
</script>
